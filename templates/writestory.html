{% extends 'base.html' %}
{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    {% block base_style%}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'styles/writestory.css' %}">
    {% endblock base_style%}
    <title>Document</title>
</head>

<body>
    {% block content %}
    <div class="writestorymain">
        <h2>Write <span>Story:</span></h2>
        <div class="flexcontain">
            <div class="rules">
                <div class="rulesimg">
                    <img src="{% static 'images/story5.png' %}" alt="">
                </div>
                <h3>Some Rules:</h3>
                <ul>
                    <li>Be Honest: Share your story authentically and from the heart.</li>
                    <li>Respect Privacy: Avoid sharing personal details that could compromise your safety or the safety
                        of others.</li>
                    <li>No Harmful Intent: Refrain from promoting harm, hate, or any form of violence in your
                        narratives.</li>
                    <li>Judgment-Free Zone: Embrace diversity and be mindful of others' feelings when sharing your
                        story.</li>
                </ul>
            </div>
            <div class="mainfrom">
                <form action="" method="post" onsubmit="return validateForm()">
                    {% csrf_token %}
                    <div class="col">
                        <!-- <label for="">Write a Subject: </label> -->
                        <input placeholder="Subject of Story" type="text" name="subject" id="subject">
                    </div>
                    <div class="col">
                        <label for="">Choose Story Type:</label>
                        <select name="storytype" id="">
                            <option value="lovestory">Love Story</option>
                            <option value="thriller">Thriller</option>
                            <option value="emotional">Emotional</option>
                            <option value="happy">Happy</option>
                            <option value="politics">Politics</option>
                            <option value="meetup">Meetup</option>
                        </select>
                    </div>
                    <div class="col">
                        <textarea placeholder="Write a story..." name="storycontent" onkeyup="onKey()" id="storycontent"
                            cols="30" rows="10"></textarea>
                        <h3 id="messagejs"></h3>
                        <input type="submit" class="copybtn" value="Post">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>

        // script to stop bad comments starts

        const badWords = ["fuck", "bitch", "dick", "ass", "asshole", "pussy", "lado", "puti", "chikne", "machikne", "machikney", "machikni", "randi", "radi"];

        function onKey() {
            const contentValue = document.querySelector("#storycontent").value.toLowerCase();
            const subjectValue = document.querySelector("#subject").value.toLowerCase();
            const messageElement = document.querySelector("#messagejs");

            const hasBadWordContent = badWords.some(word => new RegExp(`\\b${word}\\b`).test(contentValue));
            const hasBadWordSubject = badWords.some(word => new RegExp(`\\b${word}\\b`).test(subjectValue));

            if (hasBadWordContent || hasBadWordSubject) {
                messageElement.innerText = "Bad Word Detected";
                document.querySelector(".copybtn").style.cursor = "not-allowed";
            } else {
                messageElement.innerText = "";
                document.querySelector(".copybtn").style.cursor = "pointer";
            }
        }

        function validateForm() {
            const contentValue = document.querySelector("#storycontent").value.toLowerCase();
            const subjectValue = document.querySelector("#subject").value.toLowerCase();

            if (badWords.some(word => new RegExp(`\\b${word}\\b`).test(contentValue) || new RegExp(`\\b${word}\\b`).test(subjectValue))) {
                document.querySelector("#messagejs").innerText = "Bad Word Detected";
                document.querySelector(".copybtn").style.cursor = "not-allowed";
                return false;
            }
            return true;
        }
        // script to stop bad comments ends


    </script>
    {% endblock %}
</body>

</html>